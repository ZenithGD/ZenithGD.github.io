import React from 'react'
import { Canvas, useFrame } from '@react-three/fiber'
import PointCloud from '../graphics/PointCloud'
import { motion, useMotionValue, useTransform } from "framer-motion"

function CamRotate() {
    // Rotate camera each frame
    useFrame(({ clock, camera }) => {
        camera.rotation.z = clock.getElapsedTime() / 16
        camera.rotation.y = Math.sin(clock.getElapsedTime() / 4 + Math.PI / 2)
        camera.rotation.x = Math.sin(clock.getElapsedTime() / 2)
    })
    return null
}

const draw = {
    hidden: { pathLength: 0, opacity: 0 },
    visible: (i) => {
        const delay = 1 + i * 0.5;
        return {
            pathLength: 0.29,
            opacity: 1,
            transition: {
                pathLength: { delay, duration: 2 },
                opacity: { delay, duration: 0.6 }
            }
        };
    }
};

function Hero() {

    return (
        <div className='relative h-screen w-full bg-gray-850'>
            <div className='absolute z-10 h-screen w-full flex justify-center items-center backdrop-blur-sm'>
                <motion.svg 
                    width="500" 
                    height="300"
                    initial="hidden"
                    animate="visible">
                    <motion.path
                        d="M 84 243 L 54.3 243 L 0 0 L 31.8 0 L 70.2 179.1 L 106.8 0 L 137.7 0 L 84 243 Z M 413.1 230.4 L 413.1 243 L 381 243 L 381 0 L 413.1 0 L 413.1 83.4 Q 418.8 76.8 426.75 72 Q 434.7 67.2 445.8 67.2 A 41.823 41.823 0 0 1 454.741 68.101 Q 460.638 69.391 465.08 72.53 A 25.1 25.1 0 0 1 467.25 74.25 A 42.582 42.582 0 0 1 478.595 90.628 A 50.215 50.215 0 0 1 479.1 91.95 Q 483 102.6 484.2 113.55 A 240.523 240.523 0 0 1 484.931 121.32 Q 485.224 125.135 485.334 128.471 A 116.488 116.488 0 0 1 485.4 132.3 L 485.4 174.3 A 166.387 166.387 0 0 1 483.396 200.522 A 146.367 146.367 0 0 1 481.8 208.95 A 67.592 67.592 0 0 1 477.654 221.838 A 48.851 48.851 0 0 1 468.9 235.35 Q 459.625 245.373 442.592 245.4 A 57.995 57.995 0 0 1 442.5 245.4 A 31.781 31.781 0 0 1 431.385 243.492 A 29.429 29.429 0 0 1 425.85 240.75 Q 418.5 236.1 413.1 230.4 Z M 154.5 176.1 L 154.5 136.5 Q 154.5 119.339 156.984 106.482 A 90.697 90.697 0 0 1 159 98.1 Q 163.5 82.8 174.75 75 Q 183.627 68.845 197.827 67.547 A 87.653 87.653 0 0 1 205.8 67.2 A 85.05 85.05 0 0 1 217.205 67.912 Q 230.552 69.723 237.985 76.143 A 26.237 26.237 0 0 1 238.05 76.2 A 38.408 38.408 0 0 1 247.807 89.583 Q 250.346 95.198 251.7 102.15 A 162.045 162.045 0 0 1 253.837 117.036 Q 255 128.728 255 142.8 L 255 156.9 L 186.6 156.9 L 186.6 191.7 A 92.862 92.862 0 0 0 186.83 198.458 Q 187.064 201.651 187.535 204.37 A 39.351 39.351 0 0 0 188.55 208.8 A 23.569 23.569 0 0 0 190.306 213.182 Q 191.705 215.818 193.692 217.612 A 13.842 13.842 0 0 0 194.85 218.55 A 15.799 15.799 0 0 0 200.37 221.053 Q 202.567 221.599 205.136 221.684 A 29.07 29.07 0 0 0 206.1 221.7 A 24.042 24.042 0 0 0 210.263 221.363 Q 214.472 220.622 217.05 218.25 Q 220.479 215.096 221.901 209.433 A 27.947 27.947 0 0 0 222.15 208.35 A 58.938 58.938 0 0 0 223.073 202.276 Q 223.5 198.094 223.5 193.2 L 223.5 182.7 L 254.7 182.7 L 254.7 189.3 Q 254.7 208.223 248.865 221.312 A 48.228 48.228 0 0 1 243.6 230.4 Q 234.329 242.928 214.176 244.993 A 82.271 82.271 0 0 1 205.8 245.4 A 84.414 84.414 0 0 1 193.958 244.624 Q 187.945 243.77 183.03 241.976 A 36.229 36.229 0 0 1 174.3 237.45 A 38.33 38.33 0 0 1 162.028 222.562 A 52.423 52.423 0 0 1 158.85 214.05 A 104.586 104.586 0 0 1 156.034 200.333 Q 155.075 193.537 154.716 185.77 A 209.358 209.358 0 0 1 154.5 176.1 Z M 317.1 243 L 285 243 L 285 69.6 L 317.1 69.6 L 317.1 94.2 Q 326.7 78.3 336.3 72.9 Q 345.9 67.5 355.5 67.5 L 357.75 67.5 A 10.097 10.097 0 0 1 358.479 67.529 Q 359.238 67.585 360.259 67.745 A 36.211 36.211 0 0 1 360.6 67.8 L 360.6 103.2 Q 357 101.7 352.35 100.65 Q 347.7 99.6 342.9 99.6 A 28.166 28.166 0 0 0 332.816 101.382 A 26.535 26.535 0 0 0 329.25 103.05 Q 323.1 106.5 317.1 116.4 L 317.1 243 Z M 453.3 174.3 L 453.3 132.3 A 170.642 170.642 0 0 0 452.92 120.672 A 134.7 134.7 0 0 0 452.1 112.35 A 44.208 44.208 0 0 0 450.889 106.258 Q 450.02 103.134 448.718 100.611 A 22.1 22.1 0 0 0 447 97.8 A 12.479 12.479 0 0 0 439.62 92.954 Q 437.46 92.417 434.868 92.401 A 25.917 25.917 0 0 0 434.7 92.4 Q 428.4 92.4 422.85 95.1 A 59.296 59.296 0 0 0 417.033 98.327 A 47.723 47.723 0 0 0 413.1 101.1 L 413.1 212.4 A 34.961 34.961 0 0 0 418.669 215.949 A 44.737 44.737 0 0 0 423.15 217.95 A 34.082 34.082 0 0 0 432.931 220.092 A 40.333 40.333 0 0 0 435.9 220.2 A 17.902 17.902 0 0 0 440.573 219.629 A 11.715 11.715 0 0 0 447.9 214.05 A 27.857 27.857 0 0 0 450.34 208.459 Q 451.242 205.643 451.799 202.272 A 62.797 62.797 0 0 0 452.4 197.4 Q 453.3 186.9 453.3 174.3 Z M 186.6 130.2 L 186.6 139.5 L 223.5 139.5 L 223.5 123.9 Q 223.5 115.842 222.832 109.705 A 74.845 74.845 0 0 0 222.3 105.75 A 28.987 28.987 0 0 0 221.206 101.218 Q 220.416 98.861 219.251 97.034 A 14.011 14.011 0 0 0 217.35 94.65 A 11.312 11.312 0 0 0 213.236 92.087 Q 210.056 90.9 205.5 90.9 A 26.996 26.996 0 0 0 200.992 91.251 Q 198.589 91.659 196.678 92.54 A 12.238 12.238 0 0 0 193.65 94.5 Q 189.609 98.092 188.107 106.611 A 44.548 44.548 0 0 0 188.1 106.65 A 79.489 79.489 0 0 0 187.309 112.624 Q 186.7 118.866 186.614 127.36 A 281.66 281.66 0 0 0 186.6 130.2 Z"
                        fill="transparent"
                        strokeWidth="5"
                        stroke="#FFFFFF"
                        variants={draw}
                    />
                </motion.svg>
            </div>
            <Canvas>
                <ambientLight />
                <pointLight position={[10, 10, 10]} />
                <PointCloud density={500} radius={100} pointSize={1} pointColor='#FFFFFF' />
                <PointCloud />
                <CamRotate />
            </Canvas>
        </div>
    )
}

export default Hero
